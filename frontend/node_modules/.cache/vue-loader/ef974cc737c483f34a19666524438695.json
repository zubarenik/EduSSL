{"remainingRequest":"/home/nikita/VSCodeProjects/edussl/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/nikita/VSCodeProjects/edussl/src/views/Course.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/nikita/VSCodeProjects/edussl/src/views/Course.vue","mtime":1619391352890},{"path":"/home/nikita/VSCodeProjects/edussl/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/nikita/VSCodeProjects/edussl/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/nikita/VSCodeProjects/edussl/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/nikita/VSCodeProjects/edussl/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IG1hcEdldHRlcnMgfSBmcm9tICd2dWV4JwoKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdDb3Vyc2UnLAogIGNvbXBvbmVudHM6IHsKICB9LAogIGRhdGEoKSB7CiAgICAgIHJldHVybiB7CiAgICAgICAgICBpZDogdGhpcy4kcm91dGUucGFyYW1zLmlkLAogICAgICAgICAgbmFtZTogIiIsCiAgICAgICAgICBlbWFpbDogIiIsCiAgICAgICAgICBudW1iZXI6ICIiLAogICAgICAgICAgc2x1ZzogIiIsCiAgICAgIH0KICB9LAogIGNvbXB1dGVkOiB7CiAgICAuLi5tYXBHZXR0ZXJzKFsKICAgICAgICAnY291cnNlSW5mbycsCiAgICBdKQogIH0sCiAgbWV0aG9kczogewogICAgYXN5bmMgY2hlY2tQcm9tb0NvZGUoKSB7CiAgICAgICAgbGV0IHJlc3VsdAogICAgICAgIGF3YWl0IHRoaXMuJGF4aW9zLmdldChgL2NoZWNrX3Byb21vY29kZS8ke3RoaXMuaWR9L2AsIHsgCiAgICAgICAgICAgIHBhcmFtczogewogICAgICAgICAgICAgICAgc2x1ZzogdGhpcy5zbHVnIAogICAgICAgICAgICB9CiAgICAgICAgfSkKICAgICAgICAudGhlbihyZXNwb25zZSA9PiB7CiAgICAgICAgICAgIHJlc3VsdCA9IHJlc3BvbnNlLmRhdGEgPyByZXNwb25zZS5kYXRhLnNsdWcgOiBudWxsIAogICAgICAgIH0pCiAgICAgICAgcmV0dXJuIHJlc3VsdAogICAgfSwKICAgIGFzeW5jIHNhdmVTdWJzY3JpYmVyKCkgewogICAgICAgIGlmICh0aGlzLm5hbWUgPT0gIiIgfHwgdGhpcy5lbWFpbCA9PSAiIiB8fCB0aGlzLm51bWJlciA9PSAiIikgewogICAgICAgICAgICBhbGVydCgi0JfQsNC/0L7Qu9C90LjRgtC1LCDQv9C+0LbQsNC70YPQudGB0YLQsCwg0LLRgdC1INC/0L7Qu9GPINGE0L7RgNC80YshIikKICAgICAgICAgICAgcmV0dXJuCiAgICAgICAgfQogICAgICAgIAogICAgICAgIGNvbnN0IHBlcnNvbiA9IG5ldyBGb3JtRGF0YSgpCiAgICAgICAgcGVyc29uLmFwcGVuZCgnbmFtZScsIHRoaXMubmFtZSkKICAgICAgICBwZXJzb24uYXBwZW5kKCdlbWFpbCcsIHRoaXMuZW1haWwpCiAgICAgICAgcGVyc29uLmFwcGVuZCgnbnVtYmVyJywgdGhpcy5udW1iZXIpCiAgICAgICAgcGVyc29uLmFwcGVuZCgncHJvbW9jb2RlJywgYXdhaXQgdGhpcy5jaGVja1Byb21vQ29kZSgpKQoKICAgICAgICB0aGlzLiRheGlvcy5wb3N0KGAvY291cnNlLyR7dGhpcy5pZH0vYCwgcGVyc29uKQogICAgICAgIC50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICAgICAgdGhpcy5uYW1lID0gIiIKICAgICAgICAgICAgdGhpcy5lbWFpbCA9ICIiCiAgICAgICAgICAgIHRoaXMubnVtYmVyID0gIiIKICAgICAgICAgICAgdGhpcy5zbHVnID0gIiIKCiAgICAgICAgICAgIGlmICghcmVzcG9uc2UuZGF0YSl7IAogICAgICAgICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goJy9zdWNjZXNzJykKICAgICAgICAgICAgICAgIHJldHVybgogICAgICAgICAgICB9CiAgICAgICAgICAgCiAgICAgICAgICAgIGNvbnN0IHdpbiA9IHdpbmRvdy5vcGVuKCJhYm91dDpibGFuayIsICIiLCAiaGVpZ2h0PTYwMCwgd2lkdGg9NDAwIikKICAgICAgICAgICAgd2luLmRvY3VtZW50LndyaXRlKCLQn9C10YDQtdC90LDQv9GA0LDQstC70Y/QtdC8INCyINC/0LvQsNGC0LXQttC90YvQuSDRgdC10YDQstC40YEuLi4iKQogICAgICAgICAgICB3aW4ubG9jYXRpb24ucmVwbGFjZShyZXNwb25zZS5kYXRhLmxpbmspCiAgICAgICAgICAgIHdpbi5mb2N1cygpCiAgICAgICAgICAgIAogICAgICAgICAgICB0aGlzLmNoZWNrUGF5bWVudCh3aW4sIHJlc3BvbnNlLmRhdGEucGVyc29uKQogICAgICAgIH0pCiAgICAgICAgLmNhdGNoKChlcnJvcikgPT4gewogICAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcikKICAgICAgICB9KQogICAgfSwKICAgIGNoZWNrUGF5bWVudCh3aW4sIHBlcnNvbikgewogICAgICAgIHZhciB0aW1lciA9IHNldEludGVydmFsKCgpID0+IHsKICAgICAgICAgICAgdGhpcy4kYXhpb3MuZ2V0KGAvY2hlY2tfcGF5bWVudC8ke3BlcnNvbn0vYCkKICAgICAgICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiB7CiAgICAgICAgICAgICAgICBpZiAod2luLmNsb3NlZCl7CiAgICAgICAgICAgICAgICAgICAgYWxlcnQoItCf0LvQsNGC0LXQtiDQvtGC0LzQtdC90LXQvSIpIAogICAgICAgICAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwodGltZXIpICAKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2UuZGF0YS5zdGF0dXMgPT0gMSkKICAgICAgICAgICAgICAgICAgICBhbGVydCgi0KfRgtC+LdGC0L4g0LLQviDQstGA0LXQvNGPINC/0LvQsNGC0LXQttCwINC/0YDQvtGI0LvQviDQv9C70L7RhdC+IikKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEuc3RhdHVzID09IDIpIHsKICAgICAgICAgICAgICAgICAgICB3aW4uY2xvc2UoKQogICAgICAgICAgICAgICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKCcvc3VjY2VzcycpCiAgICAgICAgICAgICAgICAgICAgY2xlYXJJbnRlcnZhbCh0aW1lcikKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSkKICAgICAgICAgICAgLmNhdGNoKChlcnJvcikgPT4gewogICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyb3IpCiAgICAgICAgICAgIH0pCiAgICAgICAgfSwKICAgICAgICA1MDAwCiAgICAgICkKICAgIH0KICB9LAogIG1vdW50ZWQoKSB7CiAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgnZmV0Y2hDb3Vyc2VJbmZvJywgdGhpcy5pZCkgCiAgfSwKfQo="},{"version":3,"sources":["Course.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6NA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Course.vue","sourceRoot":"src/views","sourcesContent":["<template>\n    <div>\n\n        <!-- Google Tag Manager (noscript) -->\n        <noscript><iframe src=\"https://www.googletagmanager.com/ns.html?id=GTM-TTHMK76\"\n        height=\"0\" width=\"0\" style=\"display:none;visibility:hidden\"></iframe></noscript>\n        <!-- End Google Tag Manager (noscript) -->\n\n        <div class=\"course-view-details-inner pd-top-120\">\n            <div class=\"container\">\n                <div class=\"row\">\n                    <div class=\"col-md-8 align-self-center\">\n                        <div class=\"details\">\n                            <span class=\"sub-title\">\n                                <div v-for=\"item in courseInfo(id).category\" v-bind:key=\"item\">{{item}}</div>\n                            </span>\n                            <h1 class=\"course-heading\">{{courseInfo(id).title}}</h1>\n                            <p style=\"font-size: 1.5rem;\" class=\"mb-2\">{{courseInfo(id).description}}</p>\n                            <ul class=\"info-area text-left mt-3\">\n                                <li class=\"mr-4\"><span><i class=\"fa fa-rub\"></i> {{courseInfo(id).cost}}</span></li>\n                                <li class=\"mr-4\"><span><i class=\"fa fa-clock-o\"></i> {{courseInfo(id).lessons.length}} занятия</span></li>\n                                <li><span><i class=\"fa fa-calendar\"></i> {{courseInfo(id).date_started}}</span></li>                \n                            </ul>\n                            <ul class=\"price-area\">\n                                <li><a class=\"btn btn-base\" v-scroll-to=\"'#pay'\" href=\"#\">Записаться</a></li>\n                            </ul>\n                        </div>\n                    </div>\n                    <div class=\"col-md-4 d-none d-md-flex \">\n                        <div class=\"thumb\" style=\"margin-top: 43px;\">\n                            <img :src=\"courseInfo(id).image\" alt=\"img\">\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n        \n        <div class=\"latest-course-area pd-top-110\">\n            <div class=\"container\">\n                <div class=\"section-title \">\n                    <h2>Для кого</h2>\n                </div>\n                <div class=\"row\">\n                    <div v-for=\"item in courseInfo(id).jobs\" v-bind:key=\"item[0]\" class=\"col-lg-4 col-md-4\">\n                        <div class=\"single-course-inner\">\n                            <div class=\"thumb\">\n                                <img :src=\"item[2]\" alt=\"img\">\n                            </div>\n                            <div class=\"details\">\n                                <h5 class=\"mb-1\"><a href=\"#\">{{item[0]}}</a></h5>\n                                <p class=\"mb-3\">{{item[1]}}</p>             \n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n\n        <div class=\"category-area pd-top-110\">\n            <div class=\"container\">\n                <div class=\"row justify-content-center\">\n                    <div class=\"col-12\">\n                        <div class=\"section-title\">\n                            <h2>Чему вы научитесь</h2>\n                        </div>\n                    </div>\n                </div>\n                <div class=\"row\">\n                    <div v-for=\"item in courseInfo(id).goals\" v-bind:key=\"item[0]\" class=\"col-lg-3 col-sm-6\">\n                        <div class=\"single-category-inner text-center\">\n                            <h4>{{item[0]}}</h4>\n                            <h6>{{item[1]}}</h6>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n\n        <div class=\"category-area pd-top-110\">\n            <div class=\"container\">\n                <div class=\"row justify-content-center\">\n                    <div class=\"col-12\">\n                        <div class=\"section-title\">\n                            <h2>Программа</h2>\n                        </div>\n                    </div>\n                </div>\n                <div class=\"row\">\n                    <div class=\"col-lg-12\">\n                        <div class=\"course-view-sitebar mt-5 mt-lg-0\">\n                            <div v-for=\"lesson in courseInfo(id).lessons\" v-bind:key=\"lesson.id\" class=\"widget widget-accordion-inner p-0\">\n                                <h5 class=\"widget-title\">{{lesson.title}}</h5>\n                                <div v-for=\"theme in lesson.themes\" v-bind:key=\"theme.id\" class=\"faq-accordion accordion\">\n                                    <div class=\"card\">\n                                        <div class=\"card-header\">\n                                            <button class=\"btn\" v-b-toggle=\"`lesson${lesson.id}_theme${theme.id}`\">{{theme.title}}<i class=\"fa fa-plus\"></i><i class=\"fa fa-minus\"></i></button>\n                                        </div>\n                                        <b-collapse class=\"mt-2\" :id=\"`lesson${lesson.id}_theme${theme.id}`\">\n                                            <div v-html=\"theme.text\" class=\"card-body\"></div>\n                                        </b-collapse>\n                                    </div>\n                                </div>  \n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n\n        <div class=\"category-area pd-top-110\">\n            <div class=\"container\">\n                <div class=\"row justify-content-center\">\n                    <div class=\"col-12\">\n                        <div class=\"section-title\">\n                            <h2>Отзывы</h2>\n                        </div>\n                    </div>\n                </div>\n                <div class=\"row\">\n                    <div v-for=\"item in courseInfo(id).reviews\" v-bind:key=\"item[0]\"  class=\"col-lg-4 col-sm-6\">\n                        <div class=\"widget widget-author-inner\">\n                            <div class=\"media\">\n                                <div class=\"media-left\">\n                                    <img :src=\"item[3]\" alt=\"img\">\n                                </div>\n                                <div class=\"media-body align-self-center\">\n                                    <h5>{{item[0]}}</h5>\n                                    <p>{{item[1]}}</p>\n                                </div>\n                            </div>\n                            <p>{{item[2]}}</p>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n\n        <div class=\"category-area pd-top-110\">\n            <div class=\"container\">\n                <div class=\"row justify-content-center\">\n                    <div class=\"col-12\">\n                        <div class=\"section-title\">\n                            <h2>Преподаватели</h2>\n                        </div>\n                    </div>\n                </div>\n                <div class=\"row\">\n                    <div v-for=\"item in courseInfo(id).teachers\" v-bind:key=\"item[0]\" class=\"col-lg-4\">\n                        <div class=\"single-instructor-inner\">\n                            <div class=\"thumb\">\n                                <img :src=\"item[3]\" alt=\"img\">\n                            </div>\n                            <div class=\"details\">\n                                <h5><router-link :to=\"'/teacher/' + item[0]\">{{item[1]}}</router-link></h5>\n                                <p>{{item[2]}}</p>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n\n        <div class=\"category-area pd-top-110 back-primary\" style=\"padding-bottom: 110px;\" id=\"pay\">\n            <div class=\"container\">\n                <div class=\"row\">\n                    <div class=\"col-lg-6\">\n                        <form class=\"contact-form\">\n                            <h3>Записаться на мастер-класс {{courseInfo(id).title}}</h3>\n                            <p>Оплатите онлайн или дождитесь звонка менеджера</p>\n                            <div class=\"row\">\n                                <div class=\"col-12\">\n                                    <div class=\"single-input-wrap\">\n                                        <label>Имя</label>\n                                        <input v-model=\"name\" type=\"text\" class=\"form-control\" placeholder=\"Ваше имя\">\n                                    </div>\n                                </div>\n                                <div class=\"col-12\">\n                                    <div class=\"single-input-wrap\">\n                                        <label>Email</label>\n                                        <input v-model=\"email\" type=\"text\" class=\"form-control\" placeholder=\"Ваш Email\">\n                                    </div>\n                                </div>\n                                <div class=\"col-12\">\n                                    <div class=\"single-input-wrap\">\n                                        <label>Телефон</label>\n                                        <input v-model=\"number\" type=\"text\" class=\"form-control\" placeholder=\"Ваш номер телефона\">\n                                    </div>\n                                </div>\n                                <div class=\"col-12\">\n                                    <div class=\"single-input-wrap\">\n                                        <label>Промокод</label>\n                                        <input v-model=\"slug\" type=\"text\" class=\"form-control\">\n                                    </div>\n                                </div>\n                            </div>\n                            <button @click.prevent=\"saveSubscriber()\" type=\"submit\" class=\"btn btn-base\">Записаться</button>\n                        </form>\n                    </div>   \n                    <div class=\"col-lg-6\">\n                        <div class=\"contact-page-inner ml-xl-5 mt-5 mt-lg-0\">\n                            <div class=\"contact-map\">\n                                <h3>Ваши новые навыки:</h3>\n                                <div class=\"row\">\n                                    <div v-for=\"item in courseInfo(id).skills\" v-bind:key=\"item[0]\" class=\"col-lg-6 col-sm-6\">\n                                        <div class=\"single-category-inner text-center\">\n                                            <h4>{{item[0]}}</h4>\n                                            <h6>{{item[1]}}</h6>\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>                               \n                </div>\n            </div>\n        </div>\n\n    </div>\n</template>\n\n<script>\nimport { mapGetters } from 'vuex'\n\nexport default {\n  name: 'Course',\n  components: {\n  },\n  data() {\n      return {\n          id: this.$route.params.id,\n          name: \"\",\n          email: \"\",\n          number: \"\",\n          slug: \"\",\n      }\n  },\n  computed: {\n    ...mapGetters([\n        'courseInfo',\n    ])\n  },\n  methods: {\n    async checkPromoCode() {\n        let result\n        await this.$axios.get(`/check_promocode/${this.id}/`, { \n            params: {\n                slug: this.slug \n            }\n        })\n        .then(response => {\n            result = response.data ? response.data.slug : null \n        })\n        return result\n    },\n    async saveSubscriber() {\n        if (this.name == \"\" || this.email == \"\" || this.number == \"\") {\n            alert(\"Заполните, пожалуйста, все поля формы!\")\n            return\n        }\n        \n        const person = new FormData()\n        person.append('name', this.name)\n        person.append('email', this.email)\n        person.append('number', this.number)\n        person.append('promocode', await this.checkPromoCode())\n\n        this.$axios.post(`/course/${this.id}/`, person)\n        .then(response => {\n            this.name = \"\"\n            this.email = \"\"\n            this.number = \"\"\n            this.slug = \"\"\n\n            if (!response.data){ \n                this.$router.push('/success')\n                return\n            }\n           \n            const win = window.open(\"about:blank\", \"\", \"height=600, width=400\")\n            win.document.write(\"Перенаправляем в платежный сервис...\")\n            win.location.replace(response.data.link)\n            win.focus()\n            \n            this.checkPayment(win, response.data.person)\n        })\n        .catch((error) => {\n            console.log(error)\n        })\n    },\n    checkPayment(win, person) {\n        var timer = setInterval(() => {\n            this.$axios.get(`/check_payment/${person}/`)\n            .then((response) => {\n                if (win.closed){\n                    alert(\"Платеж отменен\") \n                    clearInterval(timer)  \n                }\n\n                if (response.data.status == 1)\n                    alert(\"Что-то во время платежа прошло плохо\")\n                \n                if (response.data.status == 2) {\n                    win.close()\n                    this.$router.push('/success')\n                    clearInterval(timer)\n                }\n            })\n            .catch((error) => {\n                console.log(error)\n            })\n        },\n        5000\n      )\n    }\n  },\n  mounted() {\n    this.$store.dispatch('fetchCourseInfo', this.id) \n  },\n}\n</script>\n"]}]}