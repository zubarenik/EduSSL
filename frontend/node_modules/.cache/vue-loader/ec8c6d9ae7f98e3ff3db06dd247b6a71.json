{"remainingRequest":"/home/nikita/VSCodeProjects/edussl/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/nikita/VSCodeProjects/edussl/src/views/Course.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/nikita/VSCodeProjects/edussl/src/views/Course.vue","mtime":1613595500404},{"path":"/home/nikita/VSCodeProjects/edussl/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/nikita/VSCodeProjects/edussl/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/nikita/VSCodeProjects/edussl/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/nikita/VSCodeProjects/edussl/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IG1hcEdldHRlcnMgfSBmcm9tICd2dWV4JwoKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdDb3Vyc2UnLAogIGNvbXBvbmVudHM6IHsKICB9LAogIGRhdGEoKSB7CiAgICAgIHJldHVybiB7CiAgICAgICAgICBpZDogdGhpcy4kcm91dGUucGFyYW1zLmlkLAogICAgICAgICAgbmFtZTogIiIsCiAgICAgICAgICBlbWFpbDogIiIsCiAgICAgICAgICBudW1iZXI6ICIiLAogICAgICB9CiAgfSwKICBjb21wdXRlZDogewogICAgLi4ubWFwR2V0dGVycyhbCiAgICAgICAgJ2NvdXJzZUluZm8nLAogICAgXSkKICB9LAogIG1ldGhvZHM6IHsKICAgIHNhdmVTdWJzY3JpYmVyKCkgewogICAgICAgIGlmICh0aGlzLm5hbWUgPT0gIiIgfHwgdGhpcy5lbWFpbCA9PSAiIiB8fCB0aGlzLm51bWJlciA9PSAiIikgewogICAgICAgICAgICBhbGVydCgi0JfQsNC/0L7Qu9C90LjRgtC1LCDQv9C+0LbQsNC70YPQudGB0YLQsCwg0LLRgdC1INC/0L7Qu9GPINGE0L7RgNC80YshIikKICAgICAgICAgICAgcmV0dXJuCiAgICAgICAgfQogICAgICAgIAogICAgICAgIGNvbnN0IHBlcnNvbiA9IG5ldyBGb3JtRGF0YSgpCiAgICAgICAgcGVyc29uLmFwcGVuZCgnbmFtZScsIHRoaXMubmFtZSkKICAgICAgICBwZXJzb24uYXBwZW5kKCdlbWFpbCcsIHRoaXMuZW1haWwpCiAgICAgICAgcGVyc29uLmFwcGVuZCgnbnVtYmVyJywgdGhpcy5udW1iZXIpCgogICAgICAgIGNvbnN0IHdpbiA9IHdpbmRvdy5vcGVuKCJhYm91dDpibGFuayIsICIiLCAiaGVpZ2h0PTYwMCwgd2lkdGg9NDAwIikKICAgICAgICB3aW4uZG9jdW1lbnQud3JpdGUoItCf0LXRgNC10L3QsNC/0YDQsNCy0LvRj9C10Lwg0LIg0L/Qu9Cw0YLQtdC20L3Ri9C5INGB0LXRgNCy0LjRgS4uLiIpCgogICAgICAgIHRoaXMuJGF4aW9zLnBvc3QoYC9jb3Vyc2UvJHt0aGlzLmlkfS9gLCBwZXJzb24pCiAgICAgICAgLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgICAgICB0aGlzLm5hbWUgPSAiIgogICAgICAgICAgICB0aGlzLmVtYWlsID0gIiIKICAgICAgICAgICAgdGhpcy5udW1iZXIgPSAiIgoKICAgICAgICAgICAgaWYgKCFyZXNwb25zZS5kYXRhKSB7CiAgICAgICAgICAgICAgICB3aW4uY2xvc2UoKQogICAgICAgICAgICAgICAgcmV0dXJuCiAgICAgICAgICAgIH0KICAgICAgICAgICAKICAgICAgICAgICAgd2luLmxvY2F0aW9uLnJlcGxhY2UocmVzcG9uc2UuZGF0YS5saW5rKQogICAgICAgICAgICB3aW4uZm9jdXMoKQogICAgICAgICAgICAKICAgICAgICAgICAgdGhpcy5jaGVja1BheW1lbnQod2luLCByZXNwb25zZS5kYXRhLnBlcnNvbikKICAgICAgICB9KQogICAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHsKICAgICAgICAgICAgY29uc29sZS5sb2coZXJyb3IpCiAgICAgICAgfSkKICAgIH0sCiAgICBjaGVja1BheW1lbnQod2luLCBwZXJzb24pIHsKICAgICAgICB2YXIgdGltZXIgPSBzZXRJbnRlcnZhbCgoKSA9PiB7CiAgICAgICAgICAgIHRoaXMuJGF4aW9zLmdldChgL2NoZWNrX3BheW1lbnQvJHtwZXJzb259L2ApCiAgICAgICAgICAgIC50aGVuKChyZXNwb25zZSkgPT4gewogICAgICAgICAgICAgICAgaWYgKHdpbi5jbG9zZWQpewogICAgICAgICAgICAgICAgICAgIGFsZXJ0KCLQn9C70LDRgtC10LYg0L7RgtC80LXQvdC10L0iKSAKICAgICAgICAgICAgICAgICAgICBjbGVhckludGVydmFsKHRpbWVyKSAgCiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEuc3RhdHVzID09IDEpCiAgICAgICAgICAgICAgICAgICAgYWxlcnQoItCn0YLQvi3RgtC+INCy0L4g0LLRgNC10LzRjyDQv9C70LDRgtC10LbQsCDQv9GA0L7RiNC70L4g0L/Qu9C+0YXQviIpCiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZS5kYXRhLnN0YXR1cyA9PSAyKSB7CiAgICAgICAgICAgICAgICAgICAgd2luLmNsb3NlKCkKICAgICAgICAgICAgICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCgnL3N1Y2Nlc3MnKQogICAgICAgICAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwodGltZXIpCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pCiAgICAgICAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHsKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yKQogICAgICAgICAgICB9KQogICAgICAgIH0sCiAgICAgICAgNTAwMAogICAgICApCiAgICB9CiAgfSwKICBtb3VudGVkKCkgewogICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ2ZldGNoQ291cnNlSW5mbycsIHRoaXMuaWQpIAogIH0sCn0K"},{"version":3,"sources":["Course.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkNA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Course.vue","sourceRoot":"src/views","sourcesContent":["<template>\n    <div>\n\n        <div class=\"course-view-details-inner pd-top-120\">\n            <div class=\"container\">\n                <div class=\"row\">\n                    <div class=\"col-md-8 align-self-center\">\n                        <div class=\"details\">\n                            <span class=\"sub-title\">\n                                <div v-for=\"item in courseInfo(id).category\" v-bind:key=\"item\">{{item}}</div>\n                            </span>\n                            <h1 class=\"course-heading\">{{courseInfo(id).title}}</h1>\n                            <p style=\"font-size: 1.5rem;\" class=\"mb-2\">{{courseInfo(id).description}}</p>\n                            <ul class=\"info-area text-left mt-3\">\n                                <li class=\"mr-4\"><span><i class=\"fa fa-rub\"></i> {{courseInfo(id).cost}}</span></li>\n                                <li class=\"mr-4\"><span><i class=\"fa fa-clock-o\"></i> {{courseInfo(id).lessons.length}} занятия</span></li>\n                                <li><span><i class=\"fa fa-calendar\"></i> {{courseInfo(id).date_started}}</span></li>                \n                            </ul>\n                            <ul class=\"price-area\">\n                                <li><router-link class=\"btn btn-base\" :to=\"{path: `/course/${this.id}`, hash: '#pay'}\">Записаться</router-link></li>\n                            </ul>\n                        </div>\n                    </div>\n                    <div class=\"col-md-4 d-none d-md-flex \">\n                        <div class=\"thumb\" style=\"margin-top: 43px;\">\n                            <img :src=\"courseInfo(id).image\" alt=\"img\">\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n        \n        <div class=\"latest-course-area pd-top-110\">\n            <div class=\"container\">\n                <div class=\"section-title \">\n                    <h2>Для кого</h2>\n                </div>\n                <div class=\"row\">\n                    <div v-for=\"item in courseInfo(id).jobs\" v-bind:key=\"item[0]\" class=\"col-lg-4 col-md-4\">\n                        <div class=\"single-course-inner\">\n                            <div class=\"thumb\">\n                                <img :src=\"item[2]\" alt=\"img\">\n                            </div>\n                            <div class=\"details\">\n                                <h5 class=\"mb-1\"><a href=\"#\">{{item[0]}}</a></h5>\n                                <p class=\"mb-3\">{{item[1]}}</p>             \n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n\n        <div class=\"category-area pd-top-110\">\n            <div class=\"container\">\n                <div class=\"row justify-content-center\">\n                    <div class=\"col-12\">\n                        <div class=\"section-title\">\n                            <h2>Чему вы научитесь</h2>\n                        </div>\n                    </div>\n                </div>\n                <div class=\"row\">\n                    <div v-for=\"item in courseInfo(id).goals\" v-bind:key=\"item[0]\" class=\"col-lg-3 col-sm-6\">\n                        <div class=\"single-category-inner text-center\">\n                            <h4>{{item[0]}}</h4>\n                            <h6>{{item[1]}}</h6>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n\n        <div class=\"category-area pd-top-110\">\n            <div class=\"container\">\n                <div class=\"row justify-content-center\">\n                    <div class=\"col-12\">\n                        <div class=\"section-title\">\n                            <h2>Программа</h2>\n                        </div>\n                    </div>\n                </div>\n                <div class=\"row\">\n                    <div class=\"col-lg-12\">\n                        <div class=\"course-view-sitebar mt-5 mt-lg-0\">\n                            <div v-for=\"lesson in courseInfo(id).lessons\" v-bind:key=\"lesson.id\" class=\"widget widget-accordion-inner p-0\">\n                                <h5 class=\"widget-title\">{{lesson.title}}</h5>\n                                <div v-for=\"theme in lesson.themes\" v-bind:key=\"theme.id\" class=\"faq-accordion accordion\">\n                                    <div class=\"card\">\n                                        <div class=\"card-header\">\n                                            <button class=\"btn\" v-b-toggle=\"`lesson${lesson.id}_theme${theme.id}`\">{{theme.title}}<i class=\"fa fa-plus\"></i><i class=\"fa fa-minus\"></i></button>\n                                        </div>\n                                        <b-collapse class=\"mt-2\" :id=\"`lesson${lesson.id}_theme${theme.id}`\">\n                                            <div v-html=\"theme.text\" class=\"card-body\"></div>\n                                        </b-collapse>\n                                    </div>\n                                </div>  \n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n\n        <div class=\"category-area pd-top-110\">\n            <div class=\"container\">\n                <div class=\"row justify-content-center\">\n                    <div class=\"col-12\">\n                        <div class=\"section-title\">\n                            <h2>Отзывы</h2>\n                        </div>\n                    </div>\n                </div>\n                <div class=\"row\">\n                    <div v-for=\"item in courseInfo(id).reviews\" v-bind:key=\"item[0]\"  class=\"col-lg-4 col-sm-6\">\n                        <div class=\"widget widget-author-inner\">\n                            <div class=\"media\">\n                                <div class=\"media-left\">\n                                    <img :src=\"item[3]\" alt=\"img\">\n                                </div>\n                                <div class=\"media-body align-self-center\">\n                                    <h5>{{item[0]}}</h5>\n                                    <p>{{item[1]}}</p>\n                                </div>\n                            </div>\n                            <p>{{item[2]}}</p>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n\n        <div class=\"category-area pd-top-110\">\n            <div class=\"container\">\n                <div class=\"row justify-content-center\">\n                    <div class=\"col-12\">\n                        <div class=\"section-title\">\n                            <h2>Преподаватели</h2>\n                        </div>\n                    </div>\n                </div>\n                <div class=\"row\">\n                    <div v-for=\"item in courseInfo(id).teachers\" v-bind:key=\"item[0]\" class=\"col-lg-4\">\n                        <div class=\"single-instructor-inner\">\n                            <div class=\"thumb\">\n                                <img :src=\"item[3]\" alt=\"img\">\n                            </div>\n                            <div class=\"details\">\n                                <h5><router-link :to=\"'/teacher/' + item[0]\">{{item[1]}}</router-link></h5>\n                                <p>{{item[2]}}</p>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n\n        <div class=\"category-area pd-top-110 back-primary\" style=\"padding-bottom: 110px;\" id=\"pay\">\n            <div class=\"container\">\n                <div class=\"row\">\n                    <div class=\"col-lg-6\">\n                        <form class=\"contact-form\">\n                            <h3>Записаться на мастер-класс {{courseInfo(id).title}}</h3>\n                            <p>Оплатите онлайн или дождитесь звонка менеджера</p>\n                            <div class=\"row\">\n                                <div class=\"col-12\">\n                                    <div class=\"single-input-wrap\">\n                                        <label>Имя</label>\n                                        <input v-model=\"name\" type=\"text\" class=\"form-control\" placeholder=\"Ваше имя\">\n                                    </div>\n                                </div>\n                                <div class=\"col-12\">\n                                    <div class=\"single-input-wrap\">\n                                        <label>Email</label>\n                                        <input v-model=\"email\" type=\"text\" class=\"form-control\" placeholder=\"Ваш Email\">\n                                    </div>\n                                </div>\n                                <div class=\"col-12\">\n                                    <div class=\"single-input-wrap\">\n                                        <label>Телефон</label>\n                                        <input v-model=\"number\" type=\"text\" class=\"form-control\" placeholder=\"Ваш номер телефона\">\n                                    </div>\n                                </div>\n                            </div>\n                            <button @click.prevent=\"saveSubscriber()\" type=\"submit\" class=\"btn btn-base\">Записаться</button>\n                        </form>\n                    </div>   \n                    <div class=\"col-lg-6\">\n                        <div class=\"contact-page-inner ml-xl-5 mt-5 mt-lg-0\">\n                            <div class=\"contact-map\">\n                                <h3>Ваши новые навыки:</h3>\n                                <div class=\"row\">\n                                    <div v-for=\"item in courseInfo(id).skills\" v-bind:key=\"item[0]\" class=\"col-lg-6 col-sm-6\">\n                                        <div class=\"single-category-inner text-center\">\n                                            <h4>{{item[0]}}</h4>\n                                            <h6>{{item[1]}}</h6>\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>                               \n                </div>\n            </div>\n        </div>\n\n    </div>\n</template>\n\n<script>\nimport { mapGetters } from 'vuex'\n\nexport default {\n  name: 'Course',\n  components: {\n  },\n  data() {\n      return {\n          id: this.$route.params.id,\n          name: \"\",\n          email: \"\",\n          number: \"\",\n      }\n  },\n  computed: {\n    ...mapGetters([\n        'courseInfo',\n    ])\n  },\n  methods: {\n    saveSubscriber() {\n        if (this.name == \"\" || this.email == \"\" || this.number == \"\") {\n            alert(\"Заполните, пожалуйста, все поля формы!\")\n            return\n        }\n        \n        const person = new FormData()\n        person.append('name', this.name)\n        person.append('email', this.email)\n        person.append('number', this.number)\n\n        const win = window.open(\"about:blank\", \"\", \"height=600, width=400\")\n        win.document.write(\"Перенаправляем в платежный сервис...\")\n\n        this.$axios.post(`/course/${this.id}/`, person)\n        .then(response => {\n            this.name = \"\"\n            this.email = \"\"\n            this.number = \"\"\n\n            if (!response.data) {\n                win.close()\n                return\n            }\n           \n            win.location.replace(response.data.link)\n            win.focus()\n            \n            this.checkPayment(win, response.data.person)\n        })\n        .catch((error) => {\n            console.log(error)\n        })\n    },\n    checkPayment(win, person) {\n        var timer = setInterval(() => {\n            this.$axios.get(`/check_payment/${person}/`)\n            .then((response) => {\n                if (win.closed){\n                    alert(\"Платеж отменен\") \n                    clearInterval(timer)  \n                }\n\n                if (response.data.status == 1)\n                    alert(\"Что-то во время платежа прошло плохо\")\n                \n                if (response.data.status == 2) {\n                    win.close()\n                    this.$router.push('/success')\n                    clearInterval(timer)\n                }\n            })\n            .catch((error) => {\n                console.log(error)\n            })\n        },\n        5000\n      )\n    }\n  },\n  mounted() {\n    this.$store.dispatch('fetchCourseInfo', this.id) \n  },\n}\n</script>\n"]}]}